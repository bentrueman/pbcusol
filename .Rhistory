transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 3e-4 / percent_fe # mass of colloidal ferrihydrite, in g
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .15, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 3e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .15, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 5e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .15, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 5e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .5, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 5e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 5e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan" =  1e-12
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 5e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 5e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_w,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 2e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_w,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 1e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_w,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
1e-4 / percent_fe
hfo_mass
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # site density in mol / m^2
hfo_mass <- 1.7e-4 # grams of colloidal ferrihydrite
hfo_s <- hfo_mass * hfo_surface_area * strong_density # number of strong binding sites
hfo_w <- hfo_mass * hfo_surface_area * weak_density # number of weak binding sites
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_w,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # site density in mol / m^2
hfo_mass <- 1.7e-4 # grams of colloidal ferrihydrite (1e-4 g Fe/L)
hfo_s <- hfo_mass * hfo_surface_area * strong_density # number of strong binding sites
hfo_w <- hfo_mass * hfo_surface_area * weak_density # number of weak binding sites
# define surface:
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_w,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
# from Example 8:
hfo_surface_area <- 600                                   # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09)         # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09)           # site density in mol / m^2
hfo_mass <- 1.7e-4                                        # grams of colloidal ferrihydrite (1e-4 g Fe/L)
hfo_s <- hfo_mass * hfo_surface_area * strong_density     # number of strong binding sites
hfo_w <- hfo_mass * hfo_surface_area * weak_density       # number of weak binding sites
# define surface:
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_w,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
build_readme()
library(devtools)
use_r("pb_sol_wham")
load_all()
?pb_sol_fixed
document()
?pb_sol_wham
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
document()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(total_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
library("tidyverse")
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(total_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
document()
load_all()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(pH = 7)), NULL, tidyphreeqc::phr_end()
)
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(pH = 7)), NULL, tidyphreeqc::phr_end()
) %>% phr_run
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(pH = 7)), NULL, tidyphreeqc::phr_end()
) %>% tidyphreeqc::phr_run()
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(Mn = 1)), NULL, tidyphreeqc::phr_end()
) %>% tidyphreeqc::phr_run()
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(Mn = 1)), NULL, tidyphreeqc::phr_end()
) %>% tidyphreeqc::phr_print_output()
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(Mn = .1)), NULL, tidyphreeqc::phr_selected_output(totals = "Mn") tidyphreeqc::phr_end()
) %>% tidyphreeqc::phr_run()
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(Mn = .1)), NULL, tidyphreeqc::phr_selected_output(totals = "Mn"), tidyphreeqc::phr_end()
) %>% tidyphreeqc::phr_run()
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(Mn = .1)), NULL, NULL, tidyphreeqc::phr_selected_output(totals = "Mn"), tidyphreeqc::phr_end()
) %>% tidyphreeqc::phr_run()
pb_sol_wham
document()
load_all()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 5.5e-3)
document()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 5.5e-3)
document()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 5.5e-3)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 5.5e-3) %>% mutate(total_pb = 1e6 * chemr::mass("Pb") * mol_Cerussite)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(total_pb = 1e6 * chemr::mass("Pb") * mol_Cerussite)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 0) %>% mutate(total_pb = 1e6 * chemr::mass("Pb") * mol_Cerussite)
document()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(total_pb = 1e6 * chemr::mass("Pb") * mol_Cerussite)
check()
library(devtools)
build_readme()
library(devtools)
use_r("pbsol")
use_r("pb_sol")
load_all()
?phr_solution_list
use_r("pb_sol_fixed")
document()
?pb_sol_fixed()
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
document()
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
enframe(phreec::minteq.dat)
library("tidyverse")
enframe(phreec::minteq.dat)
enframe(phreeqc::minteq.dat)
enframe(phreeqc::minteq.dat) %>% filter(str_detect(value, "Al(OH)3"))
enframe(phreeqc::minteq.dat) %>% filter(str_detect(value, "Berlinite"))
enframe(phreeqc::minteq.dat) %>% filter(str_detect(value, "ibbsite"))
enframe(phreeqc::minteq.dat) %>% slice(3660:3670)
enframe(phreeqc::minteq.dat) %>% slice(3660:3680)
enframe(phreeqc::minteq.dat) %>% slice(3660:3680) %>% View
pb_sol_fixed(7, 5, 0, "Gibbsite(C)", element = "Al")
length(list())
output_components = list("-totals" = c("P", "C", "Pb"))
length(output_components)
document()
load_all()
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
pb_sol_fixed(7, 5, 0, "Gibbsite(C)", element = "Al")
pb_sol_fixed(6.2, 5, 0, "Gibbsite(C)", element = "Al")
pb_sol_fixed(7.5, 5, 0, "Gibbsite(C)", element = "Al")
pb_sol_fixed(7.5, 5, 0, "Al(OH)3(a)", element = "Al")
pb_sol_fixed(7.5, 5, .16, "Al(OH)3(a)", element = "Al")
pb_sol_fixed(7.5, 5, .16, "Al(OH)3(am)", element = "Al", db = phreeqc::minteq.v4.dat)
pb_sol_fixed(7.6, 5, .16, "Al(OH)3(am)", element = "Al", db = phreeqc::minteq.v4.dat)
pb_sol_fixed(7.6, 5, .16, "Al(OH)3(a)", element = "Al", db = phreeqc::wateq4f.dat)
pb_sol_fixed(7.6, 5, .16, "Gibbsite", element = "Al", db = phreeqc::sit.dat)
document()
check()
library("devtools")
use_r("pb_sol_fixed")
document()
?pb_sol_fixed
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
check()
LIBRARY("DEVTOOLS")
library(devtools)
use_r("pb_sol_fixed")
document()
load_all()
?pb_sol_fixed
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl", print = "input")
document()
load_all()
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl", print = "output")
document()
load_all()
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl", print = "output")
document()
load_all()
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl", print = "output")
document()
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl", print = "output")
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl", print = "output")
load_all()
document()
load_all()
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl", print = "output")
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl", print = "test")
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
print <- "input"
print %in% c("input", "output")
print <- "output"
print %in% c("input", "output")
print <- "outp"
print %in% c("input", "output")
document()
load_all()
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl", print = "test")
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl", print = "input")
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl", print = "output")
use_r("pb_sol_wham")
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl", db = phreeqc::minteq.v4.dat)
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
?pb_sol_wham
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
library("tidyverse")
library("tidyverse")
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
document()
load_all()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3, print = "input")
159300 - 220800/ .003 ^ 0.09 + 91260 / .003 ^ 0.18
159300 - 220800/ 0.00695 ^ 0.09 + 91260 / 0.00695 ^ 0.18
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% pull(m)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% pull(mu)
159300 - 220800/ 0.006951182 ^ 0.09 + 91260 / 0.006951182 ^ 0.18
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3, print = "output")
6.948e-03
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
3.719e+04
159300 - 220800/ 0.006951182 ^ 0.09 + 91260 / 0.006951182 ^ 0.18
document()
load_all()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
?pb_sol_fixed
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
check()
## code to prepare `DATASET` dataset goes here
library("tidyverse")
write(pbcusol:::leadsol, "data-raw/leadsol.txt")
write(pbcusol:::cu2sol, "data-raw/cu2sol.txt")
leadsol <- pbcusol:::leadsol
cu2sol <- pbcusol:::cu2sol
usethis::use_data(leadsol, cu2sol, internal = TRUE, overwrite = TRUE)
load_all()
use_r("devtools")
library("devtools")
database <- pbcusol:::leadsol %>% tibble::enframe(name = NULL) %>%
tibble::rowid_to_column()
phases <- database %>% dplyr::filter(stringr::str_detect(.data$value,
"PHASE")) %>% dplyr::pull(.data$rowid)
filter_these <- c("ine", "ate", "ide", "ta", "Al", "Se",
"U", "As", "B", "Br", "F", "I", "V", "HS", "N", "Cr",
"Cu", "Metal") %>% paste(collapse = "|")
table <- database %>% dplyr::filter(.data$rowid > 148, stringr::str_detect(.data$value,
"Pb") | (.data$rowid > phases & dplyr::lead(.data$value,
1) %>% stringr::str_detect("Pb")) | dplyr::lag(.data$value,
1) %>% stringr::str_detect("Pb")) %>% dplyr::mutate(type = dplyr::case_when(stringr::str_detect(.data$value,
"=") ~ "eqn", stringr::str_detect(.data$value, "log_k") ~
"log_k", TRUE ~ "phase"), name = dplyr::case_when(.data$rowid <
phases & .data$type == "eqn" ~ .data$value, .data$rowid >=
phases & .data$type == "phase" ~ .data$value)) %>% tidyr::fill(.data$name) %>%
dplyr::filter(.data$type != "phase") %>% dplyr::group_by(.data$name,
.data$type) %>% dplyr::summarize(data = paste(.data$value,
collapse = ", ")) %>% dplyr::select(.data$name, .data$type,
.data$data) %>% tidyr::spread(key = .data$type, value = .data$data) %>%
dplyr::filter(!stringr::str_detect(.data$eqn, filter_these),
stringr::str_detect(.data$name, c("Cerussite", "Hydcerussite",
"Hxypyromorphite", "=") %>% paste(collapse = "|"))) %>%
dplyr::ungroup() %>% dplyr::mutate(name = dplyr::if_else(stringr::str_detect(.data$name,
"ite"), .data$name, ""), log_k = stringr::str_remove(.data$log_k,
"log_k ") %>% as.numeric()) %>% dplyr::arrange(.data$name,
stringr::str_remove_all(.data$eqn, "[0-9]"))
table
database <- pbcusol:::cu2sol %>% tibble::enframe(name = NULL) %>%
tibble::rowid_to_column()
phases <- database %>% dplyr::filter(stringr::str_detect(.data$value,
"PHASE")) %>% dplyr::pull(.data$rowid)
filter_these <- c("ine", "ate", "ide", "ta", "Al", "Se",
"U", "As", "B", "Br", "F", "I", "V", "HS", "N", "Cr",
"Cu", "Metal") %>% paste(collapse = "|")
table2 <- database %>% dplyr::filter(.data$rowid > 148, stringr::str_detect(.data$value,
"Pb") | (.data$rowid > phases & dplyr::lead(.data$value,
1) %>% stringr::str_detect("Pb")) | dplyr::lag(.data$value,
1) %>% stringr::str_detect("Pb")) %>% dplyr::mutate(type = dplyr::case_when(stringr::str_detect(.data$value,
"=") ~ "eqn", stringr::str_detect(.data$value, "log_k") ~
"log_k", TRUE ~ "phase"), name = dplyr::case_when(.data$rowid <
phases & .data$type == "eqn" ~ .data$value, .data$rowid >=
phases & .data$type == "phase" ~ .data$value)) %>% tidyr::fill(.data$name) %>%
dplyr::filter(.data$type != "phase") %>% dplyr::group_by(.data$name,
.data$type) %>% dplyr::summarize(data = paste(.data$value,
collapse = ", ")) %>% dplyr::select(.data$name, .data$type,
.data$data) %>% tidyr::spread(key = .data$type, value = .data$data) %>%
dplyr::filter(!stringr::str_detect(.data$eqn, filter_these),
stringr::str_detect(.data$name, c("Cerussite", "Hydcerussite",
"Hxypyromorphite", "=") %>% paste(collapse = "|"))) %>%
dplyr::ungroup() %>% dplyr::mutate(name = dplyr::if_else(stringr::str_detect(.data$name,
"ite"), .data$name, ""), log_k = stringr::str_remove(.data$log_k,
"log_k ") %>% as.numeric()) %>% dplyr::arrange(.data$name,
stringr::str_remove_all(.data$eqn, "[0-9]"))
all_equal(table, table2)
table
table2
library("devtools")
library("tidyverse")
database <- pbcusol:::leadsol %>% tibble::enframe(name = NULL) %>%
tibble::rowid_to_column()
phases <- database %>% dplyr::filter(stringr::str_detect(.data$value,
"PHASE")) %>% dplyr::pull(.data$rowid)
filter_these <- c("ine", "ate", "ide", "ta", "Al", "Se",
"U", "As", "B", "Br", "F", "I", "V", "HS", "N", "Cr",
"Cu", "Metal") %>% paste(collapse = "|")
table <- database %>% dplyr::filter(.data$rowid > 148, stringr::str_detect(.data$value,
"Pb") | (.data$rowid > phases & dplyr::lead(.data$value,
1) %>% stringr::str_detect("Pb")) | dplyr::lag(.data$value,
1) %>% stringr::str_detect("Pb")) %>% dplyr::mutate(type = dplyr::case_when(stringr::str_detect(.data$value,
"=") ~ "eqn", stringr::str_detect(.data$value, "log_k") ~
"log_k", TRUE ~ "phase"), name = dplyr::case_when(.data$rowid <
phases & .data$type == "eqn" ~ .data$value, .data$rowid >=
phases & .data$type == "phase" ~ .data$value)) %>% tidyr::fill(.data$name) %>%
dplyr::filter(.data$type != "phase") %>% dplyr::group_by(.data$name,
.data$type) %>% dplyr::summarize(data = paste(.data$value,
collapse = ", ")) %>% dplyr::select(.data$name, .data$type,
.data$data) %>% tidyr::spread(key = .data$type, value = .data$data) %>%
dplyr::filter(!stringr::str_detect(.data$eqn, filter_these),
stringr::str_detect(.data$name, c("Cerussite", "Hydcerussite",
"Hxypyromorphite", "=") %>% paste(collapse = "|"))) %>%
dplyr::ungroup() %>% dplyr::mutate(name = dplyr::if_else(stringr::str_detect(.data$name,
"ite"), .data$name, ""), log_k = stringr::str_remove(.data$log_k,
"log_k ") %>% as.numeric()) %>% dplyr::arrange(.data$name,
stringr::str_remove_all(.data$eqn, "[0-9]"))
database <- pbcusol:::cu2sol %>% tibble::enframe(name = NULL) %>%
tibble::rowid_to_column()
phases <- database %>% dplyr::filter(stringr::str_detect(.data$value,
"PHASE")) %>% dplyr::pull(.data$rowid)
filter_these <- c("ine", "ate", "ide", "ta", "Al", "Se",
"U", "As", "B", "Br", "F", "I", "V", "HS", "N", "Cr",
"Cu", "Metal") %>% paste(collapse = "|")
table2 <- database %>% dplyr::filter(.data$rowid > 148, stringr::str_detect(.data$value,
"Pb") | (.data$rowid > phases & dplyr::lead(.data$value,
1) %>% stringr::str_detect("Pb")) | dplyr::lag(.data$value,
1) %>% stringr::str_detect("Pb")) %>% dplyr::mutate(type = dplyr::case_when(stringr::str_detect(.data$value,
"=") ~ "eqn", stringr::str_detect(.data$value, "log_k") ~
"log_k", TRUE ~ "phase"), name = dplyr::case_when(.data$rowid <
phases & .data$type == "eqn" ~ .data$value, .data$rowid >=
phases & .data$type == "phase" ~ .data$value)) %>% tidyr::fill(.data$name) %>%
dplyr::filter(.data$type != "phase") %>% dplyr::group_by(.data$name,
.data$type) %>% dplyr::summarize(data = paste(.data$value,
collapse = ", ")) %>% dplyr::select(.data$name, .data$type,
.data$data) %>% tidyr::spread(key = .data$type, value = .data$data) %>%
dplyr::filter(!stringr::str_detect(.data$eqn, filter_these),
stringr::str_detect(.data$name, c("Cerussite", "Hydcerussite",
"Hxypyromorphite", "=") %>% paste(collapse = "|"))) %>%
dplyr::ungroup() %>% dplyr::mutate(name = dplyr::if_else(stringr::str_detect(.data$name,
"ite"), .data$name, ""), log_k = stringr::str_remove(.data$log_k,
"log_k ") %>% as.numeric()) %>% dplyr::arrange(.data$name,
stringr::str_remove_all(.data$eqn, "[0-9]"))
table
table2
