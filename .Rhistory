mu_new <- 3; mu_old <- 2
counter <- 1
max_iter <- 3
while(mu_new - mu_old > 1e-5 & counter <= max_iter) {
counter <- counter + 1                              # add one to iteration counter
next_iter <- tibble(mu = mu_new ^ 2)    # use updated mu to run calculation
mu_old <- mu_new                                    # updated mu becomes old mu
mu_new <- next_iter$mu                              # update mu
}
next_iter
6561 %>% sqrt()
max_iter
document()
load_all()
?pb_sol_wham
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
document()
load_all()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(ph = 5.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(ph = 8.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(ph = 8.5, dic = 50, phase = "Hydcerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(ph = 8.5, dic = 50, phase = "Hydcerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Hydcerussite * 1e6 * chemr::mass("Pb") * 5)
pb_sol_wham(ph = 9.5, dic = 50, phase = "Hydcerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Hydcerussite * 1e6 * chemr::mass("Pb") * 5)
pb_sol_wham(ph = 9.5, dic = 5, phase = "Hydcerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Hydcerussite * 1e6 * chemr::mass("Pb") * 5)
pb_sol_wham(ph = 9.6, dic = 5, phase = "Hydcerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Hydcerussite * 1e6 * chemr::mass("Pb") * 5)
pb_sol_wham(ph = 9.6, dic = 5, mu_is = 0.00534, phase = "Hydcerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Hydcerussite * 1e6 * chemr::mass("Pb") * 5)
pb_sol_wham(ph = 9.6, dic = 5, mu_is = 0.00534, phase = "Hydcerussite", Na = 10, mass_ha = 3.5e-3)
document()
load_all()
pb_sol_wham(ph = 9.6, dic = 5, mu_is = 0.00534, phase = "Hydcerussite", Na = 10, mass_ha = 3.5e-3)
pb_sol_wham(ph = 9.6, dic = 5, mu_is = 0.00534, phase = "Hydcerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Hydcerussite * 1e6 * chemr::mass("Pb") * 5)
document()
load_all()
document()
load_all()
pb_sol_wham(ph = 9.6, dic = 5, mu_is = 0.00534, phase = "Hydcerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Hydcerussite * 1e6 * chemr::mass("Pb") * 5)
check()
use_r("pb_sol_fixed")
use_r("pb_sol_wham")
document()
?pb_sol_fixed
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
document()
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
?pb_sol_wham
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
pb_sol_wham(ph = 7.5, dic = 50, mu_is = 0.00695, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
document()
load_all()
?pb_sol_fixed
?pb_sol_wham
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
check()
pb_sol_wham(7, 3.6, phase = "Hydcerussite", mass_ha = 3.5)
pb_sol_wham(7, 3.6, phase = "Hydcerussite", mass_ha = 3.5) %>% mutate(tot_pb = mol_Hydcerussite * 1e6 * chemr::mass("Pb") * 5)
use_r("pb_sol_wham")
document()
pb_sol_wham(7, 3.6, phase = "Hydcerussite", mass_ha = 1) %>% mutate(tot_pb = mol_Hydcerussite * 1e6 * chemr::mass("Pb") * 5)
pb_sol_wham(7, 3.6, phase = "Cerussite", mass_ha = 1) %>% mutate(tot_pb = mol_Hydcerussite * 1e6 * chemr::mass("Pb") * 5)
pb_sol_wham(7, 3.6, phase = "Cerussite", mass_ha = 1) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb")
)
pb_sol_wham(7, 3.6, phase = "Cerussite", mass_ha = 1) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(7, 3.6, phase = "Cerussite", mass_ha = 1e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(7, 3.6, phase = "Cerussite") %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(7, 3.6, phase = "Cerussite", mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(8, 3.6, phase = "Cerussite", mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
load_all()
pb_sol_wham(8, 3.6, phase = "Cerussite", mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
use_r("pb_sol_wham")
document()
load_all()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(ph = 7, dic = 3.6, phase = "Cerussite", Na = 10, mass_ha = 1e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(ph = 7, dic = 3.6, phase = "Cerussite", Na = 10, mass_ha = 1e-3, db = phreeqc::minteq.v4.dat) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(ph = 7, dic = 3.6, phase = "Hydcerussite", Na = 10, mass_ha = 1e-3, db = phreeqc::minteq.v4.dat) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(ph = 7, dic = 3.6, phase = "Hyrodcerussite", Na = 10, mass_ha = 1e-3, db = phreeqc::minteq.v4.dat) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(ph = 7, dic = 3.6, phase = "Hydrocerussite", Na = 10, mass_ha = 1e-3, db = phreeqc::minteq.v4.dat) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
pb_sol_wham(ph = 7, dic = 3.6, phase = "Hydrocerussite", Na = 10, mass_ha = 1e-3, db = phreeqc::minteq.v4.dat) %>% mutate(tot_pb = mol_Hydrocerussite * 1e6 * chemr::mass("Pb") * 5)
calculate_dic(7, 15)
use_r("pb_sol_fixed")
document()
load_all()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(tot_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
?pb_sol_fixed()
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
pb_sol_fixed(ph = 7, dic = 5, phase = "Cerussite", buffer = "HCl")
pb_sol_fixed(ph = 9.6, dic = 5, phase = "Hydcerussite", buffer = "HCl")
pb_sol(ph = 9.6, dic = 5, phase = "Hydcerussite")
?phreeqc
?pb_sol_wham
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
chemr::mass("Pb")
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>%
transmute(phase, pH, dic_ppm, solution_pb = pb_ppb, total_pb = mol_Cerussite * 1e6 * 207.21)
pb_sol_fixed
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = 1, phase = "Hxypyromorphite")
?pb_sol_fixed
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 2e-4 / percent_fe # mass of colloidal ferrihydrite, in g
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = 1, phase = "Hxypyromorphite", surface_components = fer_surf)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = 1, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .5, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 3e-4 / percent_fe # mass of colloidal ferrihydrite, in g
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .5, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 3e-4 / percent_fe # mass of colloidal ferrihydrite, in g
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7, dic = 5, phosphate = .5, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 3e-4 / percent_fe # mass of colloidal ferrihydrite, in g
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 8, dic = 5, phosphate = .5, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 3e-4 / percent_fe # mass of colloidal ferrihydrite, in g
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 3e-4 / percent_fe # mass of colloidal ferrihydrite, in g
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .15, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 3e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .15, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 5e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .15, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 5e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .5, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 5e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 5e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan" =  1e-12
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 5e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_s,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 5e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_w,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 2e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_w,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
mass_ferrihydrite <- 5 * chemr::mass("Fe2O3") + 9 * chemr::mass("H2O")
percent_fe <- 10 * chemr::mass("Fe") / mass_ferrihydrite
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # mol / m^2
hfo_mass <- 1e-4 / percent_fe # mass of colloidal ferrihydrite, in grams
hfo_s <- hfo_mass * hfo_surface_area * strong_density
hfo_w <- hfo_mass * hfo_surface_area * weak_density
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_w,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
1e-4 / percent_fe
hfo_mass
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # site density in mol / m^2
hfo_mass <- 1.7e-4 # grams of colloidal ferrihydrite
hfo_s <- hfo_mass * hfo_surface_area * strong_density # number of strong binding sites
hfo_w <- hfo_mass * hfo_surface_area * weak_density # number of weak binding sites
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_w,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
# from Example 8:
hfo_surface_area <- 600 # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09) # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09) # site density in mol / m^2
hfo_mass <- 1.7e-4 # grams of colloidal ferrihydrite (1e-4 g Fe/L)
hfo_s <- hfo_mass * hfo_surface_area * strong_density # number of strong binding sites
hfo_w <- hfo_mass * hfo_surface_area * weak_density # number of weak binding sites
# define surface:
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_w,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
# from Example 8:
hfo_surface_area <- 600                                   # m^2 / g
strong_density <- 5e-6 / (hfo_surface_area * .09)         # site density in mol / m^2
weak_density <- 2e-4 / (hfo_surface_area * .09)           # site density in mol / m^2
hfo_mass <- 1.7e-4                                        # grams of colloidal ferrihydrite (1e-4 g Fe/L)
hfo_s <- hfo_mass * hfo_surface_area * strong_density     # number of strong binding sites
hfo_w <- hfo_mass * hfo_surface_area * weak_density       # number of weak binding sites
# define surface:
fer_surf <- list(
Hfo_sOH = c(hfo_s, hfo_surface_area, hfo_mass),
Hfo_wOH = hfo_w,
"-equilibrate" = 1,
"-Donnan"
)
pb_sol_fixed(ph = 7.5, dic = 5, phosphate = .3, phase = "Hxypyromorphite", surface_components = fer_surf) %>%
transmute(phase, pH, dic_ppm, p_ppm, solution_pb = pb_ppb, total_pb = mol_Hxypyromorphite * 1e6 * 207.21 * 5)
build_readme()
library(devtools)
use_r("pb_sol_wham")
load_all()
?pb_sol_fixed
document()
?pb_sol_wham
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
document()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(total_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
library("tidyverse")
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(total_pb = mol_Cerussite * 1e6 * chemr::mass("Pb"))
document()
load_all()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(pH = 7)), NULL, tidyphreeqc::phr_end()
)
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(pH = 7)), NULL, tidyphreeqc::phr_end()
) %>% phr_run
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(pH = 7)), NULL, tidyphreeqc::phr_end()
) %>% tidyphreeqc::phr_run()
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(Mn = 1)), NULL, tidyphreeqc::phr_end()
) %>% tidyphreeqc::phr_run()
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(Mn = 1)), NULL, tidyphreeqc::phr_end()
) %>% tidyphreeqc::phr_print_output()
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(Mn = .1)), NULL, tidyphreeqc::phr_selected_output(totals = "Mn") tidyphreeqc::phr_end()
) %>% tidyphreeqc::phr_run()
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(Mn = .1)), NULL, tidyphreeqc::phr_selected_output(totals = "Mn"), tidyphreeqc::phr_end()
) %>% tidyphreeqc::phr_run()
tidyphreeqc::phr_input(
tidyphreeqc::phr_input_section(type = "SOLUTION", components = list(Mn = .1)), NULL, NULL, tidyphreeqc::phr_selected_output(totals = "Mn"), tidyphreeqc::phr_end()
) %>% tidyphreeqc::phr_run()
pb_sol_wham
document()
load_all()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 5.5e-3)
document()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 5.5e-3)
document()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 5.5e-3)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 5.5e-3) %>% mutate(total_pb = 1e6 * chemr::mass("Pb") * mol_Cerussite)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(total_pb = 1e6 * chemr::mass("Pb") * mol_Cerussite)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 0) %>% mutate(total_pb = 1e6 * chemr::mass("Pb") * mol_Cerussite)
document()
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3)
pb_sol_wham(ph = 7.5, dic = 50, phase = "Cerussite", Na = 10, mass_ha = 3.5e-3) %>% mutate(total_pb = 1e6 * chemr::mass("Pb") * mol_Cerussite)
check()
library(devtools)
build_readme()
library(devtools)
use_r("pbsol")
use_r("pb_sol")
load_all()
?phr_solution_list
use_r("pb_sol_fixed")
document()
?pb_sol_fixed()
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
document()
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
enframe(phreec::minteq.dat)
library("tidyverse")
enframe(phreec::minteq.dat)
enframe(phreeqc::minteq.dat)
enframe(phreeqc::minteq.dat) %>% filter(str_detect(value, "Al(OH)3"))
enframe(phreeqc::minteq.dat) %>% filter(str_detect(value, "Berlinite"))
enframe(phreeqc::minteq.dat) %>% filter(str_detect(value, "ibbsite"))
enframe(phreeqc::minteq.dat) %>% slice(3660:3670)
enframe(phreeqc::minteq.dat) %>% slice(3660:3680)
enframe(phreeqc::minteq.dat) %>% slice(3660:3680) %>% View
pb_sol_fixed(7, 5, 0, "Gibbsite(C)", element = "Al")
length(list())
output_components = list("-totals" = c("P", "C", "Pb"))
length(output_components)
document()
load_all()
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
pb_sol_fixed(7, 5, 0, "Gibbsite(C)", element = "Al")
pb_sol_fixed(6.2, 5, 0, "Gibbsite(C)", element = "Al")
pb_sol_fixed(7.5, 5, 0, "Gibbsite(C)", element = "Al")
pb_sol_fixed(7.5, 5, 0, "Al(OH)3(a)", element = "Al")
pb_sol_fixed(7.5, 5, .16, "Al(OH)3(a)", element = "Al")
pb_sol_fixed(7.5, 5, .16, "Al(OH)3(am)", element = "Al", db = phreeqc::minteq.v4.dat)
pb_sol_fixed(7.6, 5, .16, "Al(OH)3(am)", element = "Al", db = phreeqc::minteq.v4.dat)
pb_sol_fixed(7.6, 5, .16, "Al(OH)3(a)", element = "Al", db = phreeqc::wateq4f.dat)
pb_sol_fixed(7.6, 5, .16, "Gibbsite", element = "Al", db = phreeqc::sit.dat)
document()
check()
library("devtools")
use_r("pb_sol_fixed")
document()
?pb_sol_fixed
pb_sol_fixed(ph = 6, dic = 5, phase = "Cerussite", buffer = "HCl")
check()
